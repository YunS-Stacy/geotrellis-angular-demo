<!-- layer-header -->
<div class="layer-header js-location-modeling">
    <label class="checkbox-label">
        <input #checkLayer class="checkbox js-location-modeling" type="checkbox" [checked]="show" (click)="showChange.emit(checkLayer.checked)">                       
        <span class="icon"></span>
  {{title}}
  </label>
    <!-- layer-actions -->
    <div class="layer-actions">
        <button gdActionBtn [action]="action" [(expanded)]="this.expanded" *ngFor="let action of actions" [class.-clicked]="action==expanded"
            [class]="'action icon-'+action"></button>
    </div>
    <!-- end of layer-actions -->
</div>
<!-- end of layer-header -->
<!-- layer-selector -->
<div *ngIf="presets" class="layer-selector">
    <select #preset jsClass="location-modeling" class="dropdown" (input)="getPreset(preset.value)">
        <option *ngFor="let preset of presets; index as i" [value]="preset.value" [selected]="i==0">{{preset.text}}</option>
        <option *ngIf="preset.value==undefined" #custom [value]="undefined">{{preset.text}}</option>                            
    </select>
</div>
<!-- end of layer-selector -->
<!-- action-panel group -->
<!-- info-action-panel -->
<div class="action-panel" [class.-expanded]="'info'==expanded">
    <p class="text">
        {{infotext}}
    </p>
    <p *ngIf="palette" class="legend">
        Avoid
        <span [ngSwitch]="name" class="colorspan">
            <ng-container *ngSwitchCase="'lm'">
                <span class="color" *ngFor="let color of palette" [style.background-color]="color"></span>
        </ng-container>
        <ng-container *ngSwitchCase="'chatta'">
            <button class="selector" (click)="showMenu=!showMenu">
                    <img class="legend" [src]="'http://demo.geotrellis.com/chatta/img/ramps/'+palette+'.png'">
                </button>
            <div *ngIf="showMenu" class="panel">
                <button *ngFor="let color of palettes" class="legend-btn" (click)="paletteChange.emit(color)">
                        <img #selection class="image" [src]="'http://demo.geotrellis.com/chatta/img/ramps/'+color+'.png'">
                    </button>
            </div>
        </ng-container>
        </span>
        Prefer
    </p>
</div>
<!-- end of info-action-panel -->
<!-- weight-action-panel -->
<div class="action-panel" [class.-expanded]="'weight'==expanded">
    <header class="title">
        <h4 class="heading">Factor</h4>
        <h4 class="heading">Weight</h4>
    </header>
    <ul class="params-list">
        <gd-param-item *ngFor="let param of params; index as i;" [(value)]="values[i]" (valueChange)="this.itemValueChange()"
            [param]="param" [class]="'param-item '+param" [range]="range">
        </gd-param-item>
    </ul>
</div>
<!-- end of weight-action-panel -->
<!-- params-action-panel -->
<div class="action-panel" [class.-expanded]="'params'==expanded">
        <header class="title">
            <h4 class="heading">Factor</h4>
            <h4 class="heading">Selection</h4>
        </header>
        <ul class="params-list">
            <gd-param-item *ngFor="let param of params; index as i;" [(value)]="values[i]" (valueChange)="this.itemValueChange()"
                [param]="param" [class]="'param-item '+param" [range]="range">
            </gd-param-item>
        </ul>
    </div>
    <!-- end of weight-action-panel -->
<!-- opacity-action-panel -->
<div class="action-panel" [class.-expanded]="'opacity'==expanded">
    <label class="slider-label">
        Opacity:<span class="value">{{slider.value | percent:0}}</span>
        <input #slider class="slider" type="range" min="0" max="1" step="0.01" value="0.6" (mouseup)="opacityChange.emit(slider.value)">
    </label>
</div>
<!-- end of opacity-action-panel -->
<!-- model-actions -->
<span class="model-actions">
        <ng-container *ngFor="let action of optional">
            <button gdActionBtn [action]="action" [(expanded)]="this.expanded" [ngClass]="{'-disabled': !this.summary, '-clicked': action==expanded}" [class]="'action -light icon-'+action">Model Summary</button>
        </ng-container>
    </span>
<!-- end of model-actions -->
<!-- summary-panel (optional) -->
<div *ngIf="summary" class="action-panel" [class.-expanded]="'summary'===expanded">
    <table class="summary-table">
        <tbody>
            <tr class="heading">
                <th></th>
                <th class="bold">Total Score</th>
                <th class="bold" style="text-align:right;">{{this.summary.total}}</th>
            </tr>
            <tr *ngFor="let param of params; index as i">
                <td style="text-align:right;">{{this.values[i]}}</td>
                <td>{{param | rejoin:"_" | titlecase}}</td>
                <td class="bold" style="text-align:right;">{{this.summary.layers[i]}}</td>
            </tr>
        </tbody>
    </table>

    <!-- <header class="title">
        <h4 class="heading">Total Score</h4>
        <h4 class="heading">{{this.summary.total}}</h4>
    </header>
    <ul class="scores-list">
        <li *ngFor="let param of params; index as i" class="score-item">
            <span class="weight">{{this.value[i]}}</span>
            <span class="name">{{param | rejoin:"_" | titlecase}}</span>
            <span class="score">{{this.summary.layers[i]}}</span>
        </li>
    </ul> -->
</div>
<!-- end of summary-panel (optional) -->